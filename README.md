# 小恐龙游戏

这是一个基于EGE图形库实现的Chrome离线小恐龙游戏。

## 功能特性

- 经典的小恐龙跳跃玩法
- 支持下蹲功能，可以躲避低飞的鸟
- 随机生成不同类型的障碍物（仙人掌和飞鸟）
- 分数计算和难度递增
- 昼夜模式切换

## 操作说明

- **空格键/W键**：跳跃
- **S键/下箭头键**：下蹲（再次按下恢复正常状态）
- **ESC键**：退出游戏

## 环境要求

- Windows操作系统
- EGE图形库
- 支持C++17的编译器（如MinGW-w64）
- CMake 3.10或更高版本

## 编译说明

### 方法一：使用CMake（推荐）

1. 安装CMake（版本3.10或更高）和MinGW-w64编译器
2. 安装EGE图形库：将EGE的头文件（graphics.h, ege.h等）复制到编译器的include目录，将库文件（graphics.lib或libgraphics.a等）复制到编译器的lib目录
3. 在项目根目录打开终端，执行以下命令：
   ```bash
   mkdir build
   cd build
   cmake ..
   cmake --build .
   ```
4. 编译成功后，运行生成的可执行文件：
   ```bash
   ./dino_game
   ```

### 方法二：使用CMake并指定额外选项

如果需要指定额外的CMake选项，可以使用以下命令：

```bash
mkdir build
cd build
cmake ..
cmake --build .
```

### 方法三：CLion用户

1. 下载并安装CLion
2. 打开项目文件夹
3. 确保EGE库已正确安装到编译器目录
4. CLion会自动使用项目中的CMakeLists.txt配置进行编译

## EGE库安装

有两种安装方式：

**方式一：标准安装（推荐）**
1. 下载EGE图形库：访问 [EGE官网](https://xege.org/) 或 GitHub 仓库
2. 解压到任意目录，例如 `C:\ege`

**方式二：直接集成到编译器（适用于您当前的设置）**
1. 下载EGE图形库
2. 将EGE的头文件（如 graphics.h, ege.h）复制到编译器的include目录
3. 将EGE的库文件（如 graphics.lib 或 libgraphics.a）复制到编译器的lib目录
4. 这样就不需要在项目中指定EGE路径

## 代码结构

- `src/OptimizedMain.cpp` - 程序入口
- `src/OptimizedDinoGame.cpp` - 包含所有游戏类的实现
- `src/OptimizedDinoGame.h` - 包含所有游戏类的声明

## 优化内容

1. **文件合并**：将原来的8个文件合并为3个文件，提高了代码组织性
2. **性能优化**：优化了游戏速度调整机制，使游戏体验更加平衡
3. **代码精简**：删除了不必要的注释，使代码更加简洁易读
4. **下蹲逻辑修复**：确保下蹲时恐龙正确地向下收缩，保持底部贴地
5. **碰撞检测优化**：改进了低飞鸟和高飞鸟的碰撞检测逻辑

## 常见问题

### 编译错误
- **找不到graphics.h**: 确保EGE库已正确安装到编译器的include目录中
- **链接错误**: 确保库文件已正确安装到编译器的lib目录中，且库文件名与系统架构匹配（32位/64位）
- **函数未定义**: 检查是否正确链接了EGE库

### 运行时错误
- **程序闪退**: 确保系统已安装必要的运行时库，如MinGW-w64运行时库

## 项目配置说明

CMakeLists.txt已更新为可移植配置，不再使用硬编码路径。由于EGE库已安装到编译器目录，项目将直接使用编译器内置的EGE库文件。